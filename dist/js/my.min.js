var o="object"==typeof o?o:{};(o={init:function(){mapboxgl.accessToken="pk.eyJ1IjoidGhhdGJyYW0iLCJhIjoiY2p0YzM1NW9zMHM5MTN5cDRsdnJoOGw3byJ9.A7umZVt9Sx7Nb8jfN6M03g";let e=$.urlParam("mydocid");if(console.log("mydoc_id_queryStr_val: "+e),!1===e){o.loadMap().on("load",function(){$("#mydoc_map_status").hide(),$("#mydoc_map .alert").is(":visible")&&$("#mydoc_map .alert").removeAttr("style")})}else $("#mydoc_id_search_field").val(e),$("#mydoc_id_search_go").prop("disabled",!0),o.findMyDoC("url");$("#mydoc_id_search_field").on("input",function(){let o=$(this).val();(o=$.trim(o)).length>4?$("#mydoc_id_search_go").prop("disabled",!1):$("#mydoc_id_search_go").prop("disabled",!0)}),$("#mydoc_id_search_field").keypress(function(e){13===e.which&&o.findMyDoC("user")}),$("#mydoc_id_search_go").click(function(){o.findMyDoC("user")})},loadMap:function(o){$("#mydoc_map_status").show();var e=[-105.547222,39],a=6.5;return void 0!==o&&(void 0!==o.center&&(e=o.center),void 0!==o.zoom&&(a=o.zoom)),new mapboxgl.Map({container:"mydoc_map",style:"mapbox://styles/thatbram/cjtokh26902ad1fm43xqm4kv2",center:e,zoom:a})},findMyDoC:function(e){let a;switch(console.log("findMyDoC..."),$("#mydoc_map .alert").alert("close"),e){case"user":console.log("...source: user");var t=location.href.indexOf("?");console.log("qStr_idx: "+t),-1!==t&&history.pushState("",document.title,window.location.pathname),a=$("#mydoc_id_search_field").val(),a=$.trim(a);break;case"url":console.log("...source: url"),a=$.urlParam("mydocid")}a=a.toLowerCase(),console.log("mydoc_id_search_val: "+a);let s=!1,d=40.13,i=-105.514;if("alpha"===a&&(s=!0),s){let e=a;history.pushState("",document.title,"?mydocid="+e);let t=d,s=i,l=[s,t],m={center:l,zoom:15},c=o.loadMap(m);c.on("load",function(){console.log("findMyDoC mydoc_map.on(load)"),$("#mydoc_map_status").hide(),$("#mydoc_map .alert").is(":visible")&&$("#mydoc_map .alert").removeAttr("style");(new mapboxgl.Marker).setLngLat(l).addTo(c);var o={top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38],"bottom-left":[10,-40],"bottom-right":[-10,-40],left:[8,-30],right:[-8,-30]};mydoc_map_popup_template='<span class="mydoc_id">'+e+"</span><br>"+(t+", "+s)+'<br><a href="#">Details</a>',mydoc_map_popup=new mapboxgl.Popup({offset:o,className:"mydoc-map-popup"}).setLngLat([s,t]).setHTML(mydoc_map_popup_template).addTo(c)})}else{if(o.loadMap().on("load",function(){console.log("findMyDoC mydoc_map.on(load) - invalid id"),$("#mydoc_map_status").hide(),$("#mydoc_map .alert").is(":visible")&&$("#mydoc_map .alert").removeAttr("style")}),$("#mydoc_map").append('<div class="alert alert-danger alert-dismissible fade show" role="alert"><strong>DoC id not found.</strong> Please try again.<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>'),console.log("$(#mydoc_map_status).is(:visible): "+$("#mydoc_map_status").is(":visible")),$("#mydoc_map_status").is(":visible")){let o=$("#mydoc_map_status").outerHeight();$("#mydoc_map .alert:first").css("margin-top",o+16+"px")}}}}).init();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm15LmpzIl0sIm5hbWVzIjpbIm15ZG9jIiwiaW5pdCIsIm1hcGJveGdsIiwiYWNjZXNzVG9rZW4iLCJteWRvY19pZF9xdWVyeVN0cl92YWwiLCIkIiwidXJsUGFyYW0iLCJjb25zb2xlIiwibG9nIiwibG9hZE1hcCIsIm9uIiwiaGlkZSIsImlzIiwicmVtb3ZlQXR0ciIsInZhbCIsInByb3AiLCJmaW5kTXlEb0MiLCJteWRvY19pZF9zZWFyY2hfdmFsIiwidGhpcyIsInRyaW0iLCJsZW5ndGgiLCJrZXlwcmVzcyIsImUiLCJ3aGljaCIsImNsaWNrIiwic2V0dGluZ3MiLCJzaG93IiwiY2VudGVyIiwiem9vbSIsIk1hcCIsImNvbnRhaW5lciIsInN0eWxlIiwic291cmNlIiwiYWxlcnQiLCJxU3RyX2lkeCIsImxvY2F0aW9uIiwiaHJlZiIsImluZGV4T2YiLCJoaXN0b3J5IiwicHVzaFN0YXRlIiwiZG9jdW1lbnQiLCJ0aXRsZSIsIndpbmRvdyIsInBhdGhuYW1lIiwidG9Mb3dlckNhc2UiLCJteWRvY19pZF92YWxpZCIsIm15ZG9jX2RhdGEiLCJteWRvY19pZCIsIm15ZG9jX2xhdCIsIm15ZG9jX2xvbmciLCJteWRvY19sb2NfbWIiLCJteWRvY19tYXAiLCJNYXJrZXIiLCJzZXRMbmdMYXQiLCJhZGRUbyIsInBvcHVwT2Zmc2V0cyIsInRvcCIsInRvcC1sZWZ0IiwidG9wLXJpZ2h0IiwiYm90dG9tIiwiYm90dG9tLWxlZnQiLCJib3R0b20tcmlnaHQiLCJsZWZ0IiwicmlnaHQiLCJteWRvY19tYXBfcG9wdXBfdGVtcGxhdGUiLCJteWRvY19tYXBfcG9wdXAiLCJQb3B1cCIsIm9mZnNldCIsImNsYXNzTmFtZSIsInNldEhUTUwiLCJhcHBlbmQiLCJtYXBTdGF0dXNfaCIsIm91dGVySGVpZ2h0IiwiY3NzIl0sIm1hcHBpbmdzIjoiQUFDQSxJQUFJQSxFQUE2QixpQkFBWixFQUF5QkEsRUFBUSxJQUNyREEsRUFBUSxDQUNSQyxLQUFPLFdBQ05DLFNBQVNDLFlBQWMsNkZBQ3ZCLElBQUlDLEVBQXdCQyxFQUFFQyxTQUFTLFdBSXZDLEdBRkFDLFFBQVFDLElBQUksMEJBQTRCSixJQUVULElBQTFCQSxFQUFrQyxDQUN0QkosRUFBTVMsVUFFWkMsR0FBRyxPQUFRLFdBQ3BCTCxFQUFFLHFCQUFxQk0sT0FFbEJOLEVBQUUscUJBQXFCTyxHQUFHLGFBQzlCUCxFQUFFLHFCQUFxQlEsV0FBVyxnQkFJcENSLEVBQUUsMEJBQTBCUyxJQUFJVixHQUVoQ0MsRUFBRSx1QkFBdUJVLEtBQUssWUFBWSxHQUUxQ2YsRUFBTWdCLFVBQVUsT0FHakJYLEVBQUUsMEJBQTBCSyxHQUFHLFFBQVMsV0FDdkMsSUFBSU8sRUFBc0JaLEVBQUVhLE1BQU1KLE9BQ2pDRyxFQUFzQlosRUFBRWMsS0FBS0YsSUFFTkcsT0FBUyxFQUNoQ2YsRUFBRSx1QkFBdUJVLEtBQUssWUFBWSxHQUUxQ1YsRUFBRSx1QkFBdUJVLEtBQUssWUFBWSxLQUk1Q1YsRUFBRSwwQkFBMEJnQixTQUFVLFNBQVVDLEdBQy9CLEtBQVpBLEVBQUVDLE9BQ0x2QixFQUFNZ0IsVUFBVSxVQUlsQlgsRUFBRSx1QkFBdUJtQixNQUFPLFdBQy9CeEIsRUFBTWdCLFVBQVUsV0FJbEJQLFFBQVUsU0FBVWdCLEdBQ25CcEIsRUFBRSxxQkFBcUJxQixPQUV2QixJQUFJQyxFQUFTLEVBQUUsV0FBWSxJQUN2QkMsRUFBTyxJQXFCWCxZQW5Cd0IsSUFBYkgsU0FFcUIsSUFBcEJBLEVBQVNFLFNBQ25CQSxFQUFTRixFQUFTRSxhQUlVLElBQWxCRixFQUFTRyxPQUNuQkEsRUFBT0gsRUFBU0csT0FJRixJQUFJMUIsU0FBUzJCLElBQUksQ0FDaENDLFVBQVcsWUFDWEMsTUFBTyxxREFDUEosT0FBUUEsRUFDUkMsS0FBTUEsS0FNUlosVUFBWSxTQUFVZ0IsR0FNckIsSUFBSWYsRUFFSixPQU5BVixRQUFRQyxJQUFJLGdCQUVaSCxFQUFFLHFCQUFxQjRCLE1BQU0sU0FJckJELEdBQ1AsSUFBSyxPQUVKekIsUUFBUUMsSUFBSSxtQkFFWixJQUFJMEIsRUFBV0MsU0FBU0MsS0FBS0MsUUFBUSxLQUVyQzlCLFFBQVFDLElBQUksYUFBZTBCLElBRVQsSUFBZEEsR0FDSEksUUFBUUMsVUFBVSxHQUFJQyxTQUFTQyxNQUFPQyxPQUFPUCxTQUFTUSxVQUd2RDFCLEVBQXNCWixFQUFFLDBCQUEwQlMsTUFDbERHLEVBQXNCWixFQUFFYyxLQUFLRixHQUM5QixNQUNBLElBQUssTUFFSlYsUUFBUUMsSUFBSSxrQkFHWlMsRUFENEJaLEVBQUVDLFNBQVMsV0FJekNXLEVBQXNCQSxFQUFvQjJCLGNBRTFDckMsUUFBUUMsSUFBSSx3QkFBMEJTLEdBRXRDLElBQUk0QixHQUFpQixFQWFqQkMsRUFFRSxNQUZGQSxHQUdJLFFBUVIsR0FKNEIsVUFBeEI3QixJQUNINEIsR0FBaUIsR0FHZEEsRUFBZ0IsQ0FDbkIsSUFBSUUsRUFBVzlCLEVBR2ZxQixRQUFRQyxVQUFVLEdBQUlDLFNBQVNDLE1BQU8sWUFBY00sR0FFcEQsSUFBSUMsRUFBWUYsRUFDWkcsRUFBYUgsRUFDYkksRUFBZSxDQUFDRCxFQUFZRCxHQUU1QnZCLEVBQVcsQ0FDZEUsT0FBUXVCLEVBQ1J0QixLQUFNLElBR0h1QixFQUFZbkQsRUFBTVMsUUFBUWdCLEdBRTlCMEIsRUFBVXpDLEdBQUcsT0FBUSxXQUVwQkgsUUFBUUMsSUFBSSxnQ0FFWkgsRUFBRSxxQkFBcUJNLE9BRWxCTixFQUFFLHFCQUFxQk8sR0FBRyxhQUM5QlAsRUFBRSxxQkFBcUJRLFdBQVcsVUFHaEIsSUFBSVgsU0FBU2tELFFBQVNDLFVBQVVILEdBQWNJLE1BQU1ILEdBRXZFLElBSUlJLEVBQWUsQ0FDbEJDLElBQU8sQ0FBQyxFQUFHLEdBQ1hDLFdBQVksQ0FBQyxFQUFFLEdBQ2ZDLFlBQWEsQ0FBQyxFQUFFLEdBQ2hCQyxPQUFVLENBQUMsR0FSTyxJQVNsQkMsY0FBZSxDQVBBLElBT2UsSUFDOUJDLGVBQWdCLEVBUkQsSUFRaUIsSUFDaENDLEtBQVEsQ0FWTyxHQVVRLElBQ3ZCQyxNQUFTLEVBWE0sR0FXVSxLQUsxQkMseUJBQTJCLDBCQUE0QmpCLEVBQVcsZUFGOUNDLEVBQVksS0FBT0MsR0FLcEMsOEJBSUhnQixnQkFBa0IsSUFBSS9ELFNBQVNnRSxNQUFNLENBQUNDLE9BQVFaLEVBQWNhLFVBQVcsb0JBQ3JFZixVQUFVLENBQUNKLEVBQVlELElBQ3ZCcUIsUUFBUUwsMEJBQ1JWLE1BQU1ILFNBRUgsQ0FrQk4sR0FqQmdCbkQsRUFBTVMsVUFFWkMsR0FBRyxPQUFRLFdBRXBCSCxRQUFRQyxJQUFJLDZDQUVaSCxFQUFFLHFCQUFxQk0sT0FFbEJOLEVBQUUscUJBQXFCTyxHQUFHLGFBQzlCUCxFQUFFLHFCQUFxQlEsV0FBVyxXQUlwQ1IsRUFBRSxjQUFjaUUsT0FBTyxtUUFFdkIvRCxRQUFRQyxJQUFLLHNDQUF5Q0gsRUFBRSxxQkFBcUJPLEdBQUcsYUFFM0VQLEVBQUUscUJBQXFCTyxHQUFHLFlBQWMsQ0FDNUMsSUFBSTJELEVBQWNsRSxFQUFFLHFCQUFxQm1FLGNBRXpDbkUsRUFBRSwyQkFBMkJvRSxJQUFJLGFBQWNGLEVBQWMsR0FBSyxXQVNuRXRFIiwiZmlsZSI6Im15Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKiBteS5qcyAqL1xudmFyIG15ZG9jID0gKCB0eXBlb2YgKG15ZG9jKSA9PT0gJ29iamVjdCcgKSA/IG15ZG9jIDoge307XG4obXlkb2MgPSB7XG5cdGluaXQgOiBmdW5jdGlvbiAoKSB7XG5cdFx0bWFwYm94Z2wuYWNjZXNzVG9rZW4gPSAncGsuZXlKMUlqb2lkR2hoZEdKeVlXMGlMQ0poSWpvaVkycDBZek0xTlc5ek1ITTVNVE41Y0RSc2RuSm9PR3czYnlKOS5BN3VtWlZ0OVN4N05iOGpmTjZNMDNnJztcblx0XHRsZXQgbXlkb2NfaWRfcXVlcnlTdHJfdmFsID0gJC51cmxQYXJhbSgnbXlkb2NpZCcpO1xuXG5cdFx0Y29uc29sZS5sb2coJ215ZG9jX2lkX3F1ZXJ5U3RyX3ZhbDogJyArIG15ZG9jX2lkX3F1ZXJ5U3RyX3ZhbCk7XG5cblx0XHRpZiAoIG15ZG9jX2lkX3F1ZXJ5U3RyX3ZhbCA9PT0gZmFsc2UgKSB7XG5cdFx0XHRsZXQgbXlkb2NfbWFwID0gbXlkb2MubG9hZE1hcCgpO1xuXG5cdFx0XHRteWRvY19tYXAub24oJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdCQoJyNteWRvY19tYXBfc3RhdHVzJykuaGlkZSgpO1xuXG5cdFx0XHRcdGlmICggJCgnI215ZG9jX21hcCAuYWxlcnQnKS5pcygnOnZpc2libGUnKSApIHtcblx0XHRcdFx0XHQkKCcjbXlkb2NfbWFwIC5hbGVydCcpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkKCcjbXlkb2NfaWRfc2VhcmNoX2ZpZWxkJykudmFsKG15ZG9jX2lkX3F1ZXJ5U3RyX3ZhbCk7XG5cblx0XHRcdCQoJyNteWRvY19pZF9zZWFyY2hfZ28nKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuXG5cdFx0XHRteWRvYy5maW5kTXlEb0MoJ3VybCcpO1xuXHRcdH1cblxuXHRcdCQoJyNteWRvY19pZF9zZWFyY2hfZmllbGQnKS5vbignaW5wdXQnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRsZXQgbXlkb2NfaWRfc2VhcmNoX3ZhbCA9ICQodGhpcykudmFsKCk7XG5cdFx0XHRcdG15ZG9jX2lkX3NlYXJjaF92YWwgPSAkLnRyaW0obXlkb2NfaWRfc2VhcmNoX3ZhbCk7XG5cblx0XHRcdGlmIChteWRvY19pZF9zZWFyY2hfdmFsLmxlbmd0aCA+IDQpIHtcblx0XHRcdFx0JCgnI215ZG9jX2lkX3NlYXJjaF9nbycpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JCgnI215ZG9jX2lkX3NlYXJjaF9nbycpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQkKCcjbXlkb2NfaWRfc2VhcmNoX2ZpZWxkJykua2V5cHJlc3MoIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRpZiAoZS53aGljaCA9PT0gMTMpIHtcblx0XHRcdFx0bXlkb2MuZmluZE15RG9DKCd1c2VyJyk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQkKCcjbXlkb2NfaWRfc2VhcmNoX2dvJykuY2xpY2soIGZ1bmN0aW9uICgpIHtcblx0XHRcdG15ZG9jLmZpbmRNeURvQygndXNlcicpO1xuXHRcdH0pO1xuXHR9XG5cdCxcblx0bG9hZE1hcCA6IGZ1bmN0aW9uIChzZXR0aW5ncykge1xuXHRcdCQoJyNteWRvY19tYXBfc3RhdHVzJykuc2hvdygpO1xuXG5cdFx0dmFyIGNlbnRlciA9IFstMTA1LjU0NzIyMiwgMzldO1xuXHRcdHZhciB6b29tID0gNi41O1xuXG5cdFx0aWYgKHR5cGVvZiBzZXR0aW5ncyAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdC8qKiBJZiBubyBtYXAgY2VudGVyIGlzIHNwZWNpZmllZCwgc2V0IHRvIGdlb2dyYXBoaWMgY2VudGVyIG9mIENvbG9yYWRvICovXG5cdFx0XHRpZiAodHlwZW9mIHNldHRpbmdzLmNlbnRlciAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0Y2VudGVyID0gc2V0dGluZ3MuY2VudGVyO1xuXHRcdFx0fVxuXG5cdFx0XHQvKiogSWYgbm8gbWFwIHpvb20gbGV2ZWwgaXMgc3BlY2lmaWVkLCBzZXQgdG8gYSBsZXZlbCBtYWtpbmcgQ29sb3JhZG8gaWRlbnRpZmlhYmxlIGFjcm9zcyB3aWRlc3QgdmFyaWV0eSBvZiByZXNvbHV0aW9ucyAqL1xuXHRcdFx0aWYgKHR5cGVvZiBzZXR0aW5ncy56b29tICE9PSAndW5kZWZpbmVkJykge1xuXHRcdFx0XHR6b29tID0gc2V0dGluZ3Muem9vbTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRsZXQgbXlkb2NfbWFwID0gbmV3IG1hcGJveGdsLk1hcCh7XG5cdFx0XHRjb250YWluZXI6ICdteWRvY19tYXAnLFxuXHRcdFx0c3R5bGU6ICdtYXBib3g6Ly9zdHlsZXMvdGhhdGJyYW0vY2p0b2toMjY5MDJhZDFmbTQzeHFtNGt2MicsIC8vICdSYWRvIDJcblx0XHRcdGNlbnRlcjogY2VudGVyLFxuXHRcdFx0em9vbTogem9vbVxuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIG15ZG9jX21hcDtcblx0fVxuXHQsXG5cdGZpbmRNeURvQyA6IGZ1bmN0aW9uIChzb3VyY2UpIHtcblxuXHRcdGNvbnNvbGUubG9nKCdmaW5kTXlEb0MuLi4nKTtcblxuXHRcdCQoJyNteWRvY19tYXAgLmFsZXJ0JykuYWxlcnQoJ2Nsb3NlJyk7XG5cblx0XHRsZXQgbXlkb2NfaWRfc2VhcmNoX3ZhbDtcblxuXHRcdHN3aXRjaCAoc291cmNlKSB7XG5cdFx0XHRjYXNlICd1c2VyJzpcblxuXHRcdFx0XHRjb25zb2xlLmxvZygnLi4uc291cmNlOiB1c2VyJyk7XG5cblx0XHRcdFx0dmFyIHFTdHJfaWR4ID0gbG9jYXRpb24uaHJlZi5pbmRleE9mKCc/Jyk7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coJ3FTdHJfaWR4OiAnICsgcVN0cl9pZHgpO1xuXG5cdFx0XHRcdGlmIChxU3RyX2lkeCAhPT0gLTEpIHtcblx0XHRcdFx0XHRoaXN0b3J5LnB1c2hTdGF0ZSgnJywgZG9jdW1lbnQudGl0bGUsIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRteWRvY19pZF9zZWFyY2hfdmFsID0gJCgnI215ZG9jX2lkX3NlYXJjaF9maWVsZCcpLnZhbCgpO1xuXHRcdFx0XHRteWRvY19pZF9zZWFyY2hfdmFsID0gJC50cmltKG15ZG9jX2lkX3NlYXJjaF92YWwpO1xuXHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICd1cmwnOlxuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCcuLi5zb3VyY2U6IHVybCcpO1xuXG5cdFx0XHRcdGxldCBteWRvY19pZF9xdWVyeVN0cl92YWwgPSAkLnVybFBhcmFtKCdteWRvY2lkJyk7XG5cdFx0XHRcdG15ZG9jX2lkX3NlYXJjaF92YWwgPSBteWRvY19pZF9xdWVyeVN0cl92YWw7XG5cdFx0fVxuXG5cdFx0bXlkb2NfaWRfc2VhcmNoX3ZhbCA9IG15ZG9jX2lkX3NlYXJjaF92YWwudG9Mb3dlckNhc2UoKTtcblxuXHRcdGNvbnNvbGUubG9nKCdteWRvY19pZF9zZWFyY2hfdmFsOiAnICsgbXlkb2NfaWRfc2VhcmNoX3ZhbCk7XG5cblx0XHRsZXQgbXlkb2NfaWRfdmFsaWQgPSBmYWxzZTtcblxuXHRcdC8qKiBcblx0XHQgKiBJbiBhbiB1cGNvbWluZyB2ZXJzaW9uLCBcblx0XHQgKiBhdCB0aGlzIHBvaW50IGEgcmVxdWVzdCBpcyBtYWRlIFxuXHRcdCAqIHRvIHRoZSBteURvQyBkYXRhc3RvcmUgXG5cdFx0ICogSWYgYSBtYXRjaCBpcyBmb3VuZCwgXG5cdFx0ICogYSBzdWNjZXNzIHN0YXR1cyBpcyByZXR1cm5lZCBcblx0XHQgKiB3aXRoIHRoZSBkYXRhIGluIHRoZSByZXNwb25zZS5cblx0XHQgKlxuXHRcdCAqIEZvciBub3csIHRoZXJlIGlzIHRoaXMuLi5cblx0XHQgKi9cblxuXHRcdGxldCBteWRvY19kYXRhID0ge1xuXHRcdFx0ZGF0ZTogJzIwMTktMDMtMTEnLFxuXHRcdFx0bGF0OiA0MC4xMzAsXG5cdFx0XHRsb25nOiAtMTA1LjUxNFxuXHRcdH07XG5cblx0XHQvKiogTWF0Y2hpbmcgXCJhbHBoYVwiIGlzIHRoZSBkZXYgcGxhY2Vob2xkZXIgZm9yIG1hdGNoaW5nIGEgdmFsaWQgSUQgKi9cblx0XHRpZiAobXlkb2NfaWRfc2VhcmNoX3ZhbCA9PT0gJ2FscGhhJykge1xuXHRcdFx0bXlkb2NfaWRfdmFsaWQgPSB0cnVlO1xuXHRcdH1cblxuXHRcdGlmIChteWRvY19pZF92YWxpZCkge1xuXHRcdFx0bGV0IG15ZG9jX2lkID0gbXlkb2NfaWRfc2VhcmNoX3ZhbDtcblxuXHRcdFx0LyoqIFNldCBkaXJlY3RseSBhY2Nlc3NpYmxlIFVSTCAqL1xuXHRcdFx0aGlzdG9yeS5wdXNoU3RhdGUoJycsIGRvY3VtZW50LnRpdGxlLCAnP215ZG9jaWQ9JyArIG15ZG9jX2lkKTtcblxuXHRcdFx0bGV0IG15ZG9jX2xhdCA9IG15ZG9jX2RhdGEubGF0O1xuXHRcdFx0bGV0IG15ZG9jX2xvbmcgPSBteWRvY19kYXRhLmxvbmc7XG5cdFx0XHRsZXQgbXlkb2NfbG9jX21iID0gW215ZG9jX2xvbmcsIG15ZG9jX2xhdF07XG5cblx0XHRcdGxldCBzZXR0aW5ncyA9IHtcblx0XHRcdFx0Y2VudGVyOiBteWRvY19sb2NfbWIsXG5cdFx0XHRcdHpvb206IDE1XG5cdFx0XHR9XG5cblx0XHRcdGxldCBteWRvY19tYXAgPSBteWRvYy5sb2FkTWFwKHNldHRpbmdzKTtcblxuXHRcdFx0bXlkb2NfbWFwLm9uKCdsb2FkJywgZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdmaW5kTXlEb0MgbXlkb2NfbWFwLm9uKGxvYWQpJyk7XG5cblx0XHRcdFx0JCgnI215ZG9jX21hcF9zdGF0dXMnKS5oaWRlKCk7XG5cblx0XHRcdFx0aWYgKCAkKCcjbXlkb2NfbWFwIC5hbGVydCcpLmlzKCc6dmlzaWJsZScpICkge1xuXHRcdFx0XHRcdCQoJyNteWRvY19tYXAgLmFsZXJ0JykucmVtb3ZlQXR0cignc3R5bGUnKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGxldCBteWRvY19tYXJrZXIgPSBuZXcgbWFwYm94Z2wuTWFya2VyKCkuc2V0TG5nTGF0KG15ZG9jX2xvY19tYikuYWRkVG8obXlkb2NfbWFwKTtcblxuXHRcdFx0XHR2YXIgbWFya2VySGVpZ2h0ID0gMzgsXG5cdFx0XHRcdFx0bWFya2VyUmFkaXVzID0gOCxcblx0XHRcdFx0XHRsaW5lYXJPZmZzZXQgPSAxMDtcblxuXHRcdFx0XHR2YXIgcG9wdXBPZmZzZXRzID0ge1xuXHRcdFx0XHRcdCd0b3AnOiBbMCwgMF0sXG5cdFx0XHRcdFx0J3RvcC1sZWZ0JzogWzAsMF0sXG5cdFx0XHRcdFx0J3RvcC1yaWdodCc6IFswLDBdLFxuXHRcdFx0XHRcdCdib3R0b20nOiBbMCwgLW1hcmtlckhlaWdodF0sXG5cdFx0XHRcdFx0J2JvdHRvbS1sZWZ0JzogW2xpbmVhck9mZnNldCwgKG1hcmtlckhlaWdodCAtIG1hcmtlclJhZGl1cyArIGxpbmVhck9mZnNldCkgKiAtMV0sXG5cdFx0XHRcdFx0J2JvdHRvbS1yaWdodCc6IFstbGluZWFyT2Zmc2V0LCAobWFya2VySGVpZ2h0IC0gbWFya2VyUmFkaXVzICsgbGluZWFyT2Zmc2V0KSAqIC0xXSxcblx0XHRcdFx0XHQnbGVmdCc6IFttYXJrZXJSYWRpdXMsIChtYXJrZXJIZWlnaHQgLSBtYXJrZXJSYWRpdXMpICogLTFdLFxuXHRcdFx0XHRcdCdyaWdodCc6IFstbWFya2VyUmFkaXVzLCAobWFya2VySGVpZ2h0IC0gbWFya2VyUmFkaXVzKSAqIC0xXVxuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdGxldCBteWRvY19sb2Nfc3RyID0gbXlkb2NfbGF0ICsgJywgJyArIG15ZG9jX2xvbmc7XG5cblx0XHRcdFx0bXlkb2NfbWFwX3BvcHVwX3RlbXBsYXRlID0gJzxzcGFuIGNsYXNzPVwibXlkb2NfaWRcIj4nICsgbXlkb2NfaWQgKyAnPC9zcGFuPidcblx0XHRcdFx0XHQrICc8YnI+J1xuXHRcdFx0XHRcdCsgbXlkb2NfbG9jX3N0clxuXHRcdFx0XHRcdCsgJzxicj4nXG5cdFx0XHRcdFx0KyAnPGEgaHJlZj1cIiNcIj5EZXRhaWxzPC9hPidcblx0XHRcdFx0O1xuXG5cdFx0XHRcdG15ZG9jX21hcF9wb3B1cCA9IG5ldyBtYXBib3hnbC5Qb3B1cCh7b2Zmc2V0OiBwb3B1cE9mZnNldHMsIGNsYXNzTmFtZTogJ215ZG9jLW1hcC1wb3B1cCd9KVxuXHRcdFx0XHRcdC5zZXRMbmdMYXQoW215ZG9jX2xvbmcsIG15ZG9jX2xhdF0pXG5cdFx0XHRcdFx0LnNldEhUTUwobXlkb2NfbWFwX3BvcHVwX3RlbXBsYXRlKVxuXHRcdFx0XHRcdC5hZGRUbyhteWRvY19tYXApO1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGxldCBteWRvY19tYXAgPSBteWRvYy5sb2FkTWFwKCk7XG5cblx0XHRcdG15ZG9jX21hcC5vbignbG9hZCcsIGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHRjb25zb2xlLmxvZygnZmluZE15RG9DIG15ZG9jX21hcC5vbihsb2FkKSAtIGludmFsaWQgaWQnKTtcblxuXHRcdFx0XHQkKCcjbXlkb2NfbWFwX3N0YXR1cycpLmhpZGUoKTtcblxuXHRcdFx0XHRpZiAoICQoJyNteWRvY19tYXAgLmFsZXJ0JykuaXMoJzp2aXNpYmxlJykgKSB7XG5cdFx0XHRcdFx0JCgnI215ZG9jX21hcCAuYWxlcnQnKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0JCgnI215ZG9jX21hcCcpLmFwcGVuZCgnPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWRhbmdlciBhbGVydC1kaXNtaXNzaWJsZSBmYWRlIHNob3dcIiByb2xlPVwiYWxlcnRcIj48c3Ryb25nPkRvQyBpZCBub3QgZm91bmQuPC9zdHJvbmc+IFBsZWFzZSB0cnkgYWdhaW4uPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIGRhdGEtZGlzbWlzcz1cImFsZXJ0XCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+PHNwYW4gYXJpYS1oaWRkZW49XCJ0cnVlXCI+JnRpbWVzOzwvc3Bhbj48L2J1dHRvbj48L2Rpdj4nKTtcblxuXHRcdFx0Y29uc29sZS5sb2coICckKCNteWRvY19tYXBfc3RhdHVzKS5pcyg6dmlzaWJsZSk6ICcgKyAgJCgnI215ZG9jX21hcF9zdGF0dXMnKS5pcygnOnZpc2libGUnKSApO1xuXG5cdFx0XHRpZiAoICQoJyNteWRvY19tYXBfc3RhdHVzJykuaXMoJzp2aXNpYmxlJykgKSB7XG5cdFx0XHRcdGxldCBtYXBTdGF0dXNfaCA9ICQoJyNteWRvY19tYXBfc3RhdHVzJykub3V0ZXJIZWlnaHQoKTtcblxuXHRcdFx0XHQkKCcjbXlkb2NfbWFwIC5hbGVydDpmaXJzdCcpLmNzcygnbWFyZ2luLXRvcCcsIG1hcFN0YXR1c19oICsgMTYgKyAncHgnKTtcblx0XHRcdH1cblxuXHRcdFx0LyoqIEF1dG9jbG9zZSB0aGUgYWxlcnRzICovXG5cdFx0XHQvKndpbmRvdy5zZXRUaW1lb3V0KCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICQoJyNteWRvY19tYXAgLmFsZXJ0JykuYWxlcnQoJ2Nsb3NlJyk7XG5cdCAgICAgICAgfSwgNDAwMCk7Ki9cblx0XHR9XG5cdH1cbn0pLmluaXQoKTtcbiJdfQ==
