var o="object"==typeof o?o:{};(o={init:function(){mapboxgl.accessToken="pk.eyJ1IjoidGhhdGJyYW0iLCJhIjoiY2p0YzM1NW9zMHM5MTN5cDRsdnJoOGw3byJ9.A7umZVt9Sx7Nb8jfN6M03g";let e=$.urlParam("mydocid");if(console.log("mydoc_id_queryStr_val: "+e),!1===e){o.loadMap().on("load",function(){$("#mydoc_map_status").hide(),$("#mydoc_map .alert").is(":visible")&&$("#mydoc_map .alert").removeAttr("style")})}else $("#mydoc_id_search_field").val(e),$("#mydoc_id_search_go").prop("disabled",!0),o.findMyDoC("url");$("#mydoc_id_search_field").on("input",function(){let o=$(this).val();(o=$.trim(o)).length>4?$("#mydoc_id_search_go").prop("disabled",!1):$("#mydoc_id_search_go").prop("disabled",!0)}),$("#mydoc_id_search_field").keypress(function(e){13===e.which&&o.findMyDoC("user")}),$("#mydoc_id_search_go").click(function(){o.findMyDoC("user")})},loadMap:function(o){$("#mydoc_map_status").show();var e=[-105.547222,39],a=6.5;return void 0!==o&&(void 0!==o.center&&(e=o.center),void 0!==o.zoom&&(a=o.zoom)),new mapboxgl.Map({container:"mydoc_map",style:"mapbox://styles/thatbram/cjtokh26902ad1fm43xqm4kv2",center:e,zoom:a})},findMyDoC:function(e){let a;switch(console.log("findMyDoC..."),$("#mydoc_map .alert").alert("close"),e){case"user":console.log("...source: user");var t=location.href.indexOf("?");console.log("qStr_idx: "+t),-1!==t&&history.pushState("",document.title,window.location.pathname),a=$("#mydoc_id_search_field").val(),a=$.trim(a);break;case"url":console.log("...source: url"),a=$.urlParam("mydocid")}a=a.toLowerCase(),console.log("mydoc_id_search_val: "+a);let d=!1,s=40.13,i=-105.514;if("alpha"===a&&(d=!0),d){let e=a;history.pushState("",document.title,"?mydocid="+e);let t=s,d=i,l=[d,t],m={center:l,zoom:15},c=o.loadMap(m);c.on("load",function(){console.log("findMyDoC mydoc_map.on(load)"),$("#mydoc_map_status").hide(),$("#mydoc_map .alert").is(":visible")&&$("#mydoc_map .alert").removeAttr("style");(new mapboxgl.Marker).setLngLat(l).addTo(c);var o={top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38],"bottom-left":[10,-40],"bottom-right":[-10,-40],left:[8,-30],right:[-8,-30]};mydoc_map_popup_template='<span class="mydoc_id">'+e+"</span><br>"+(t+", "+d)+'<br><a href="#mydoc_details">Details</a>',mydoc_map_popup=new mapboxgl.Popup({offset:o,className:"mydoc-map-popup"}).setLngLat([d,t]).setHTML(mydoc_map_popup_template).addTo(c)})}else{if(o.loadMap().on("load",function(){console.log("findMyDoC mydoc_map.on(load) - invalid id"),$("#mydoc_map_status").hide(),$("#mydoc_map .alert").is(":visible")&&$("#mydoc_map .alert").removeAttr("style")}),$("#mydoc_map").append('<div class="alert alert-danger alert-dismissible fade show" role="alert"><strong>DoC id not found.</strong> Please try again.<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>'),console.log("$(#mydoc_map_status).is(:visible): "+$("#mydoc_map_status").is(":visible")),$("#mydoc_map_status").is(":visible")){let o=$("#mydoc_map_status").outerHeight();$("#mydoc_map .alert:first").css("margin-top",o+16+"px")}}}}).init();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm15LmpzIl0sIm5hbWVzIjpbIm15ZG9jIiwiaW5pdCIsIm1hcGJveGdsIiwiYWNjZXNzVG9rZW4iLCJteWRvY19pZF9xdWVyeVN0cl92YWwiLCIkIiwidXJsUGFyYW0iLCJjb25zb2xlIiwibG9nIiwibG9hZE1hcCIsIm9uIiwiaGlkZSIsImlzIiwicmVtb3ZlQXR0ciIsInZhbCIsInByb3AiLCJmaW5kTXlEb0MiLCJteWRvY19pZF9zZWFyY2hfdmFsIiwidGhpcyIsInRyaW0iLCJsZW5ndGgiLCJrZXlwcmVzcyIsImUiLCJ3aGljaCIsImNsaWNrIiwic2V0dGluZ3MiLCJzaG93IiwiY2VudGVyIiwiem9vbSIsIk1hcCIsImNvbnRhaW5lciIsInN0eWxlIiwic291cmNlIiwiYWxlcnQiLCJxU3RyX2lkeCIsImxvY2F0aW9uIiwiaHJlZiIsImluZGV4T2YiLCJoaXN0b3J5IiwicHVzaFN0YXRlIiwiZG9jdW1lbnQiLCJ0aXRsZSIsIndpbmRvdyIsInBhdGhuYW1lIiwidG9Mb3dlckNhc2UiLCJteWRvY19pZF92YWxpZCIsIm15ZG9jX2RhdGEiLCJteWRvY19pZCIsIm15ZG9jX2xhdCIsIm15ZG9jX2xvbmciLCJteWRvY19sb2NfbWIiLCJteWRvY19tYXAiLCJNYXJrZXIiLCJzZXRMbmdMYXQiLCJhZGRUbyIsInBvcHVwT2Zmc2V0cyIsInRvcCIsInRvcC1sZWZ0IiwidG9wLXJpZ2h0IiwiYm90dG9tIiwiYm90dG9tLWxlZnQiLCJib3R0b20tcmlnaHQiLCJsZWZ0IiwicmlnaHQiLCJteWRvY19tYXBfcG9wdXBfdGVtcGxhdGUiLCJteWRvY19tYXBfcG9wdXAiLCJQb3B1cCIsIm9mZnNldCIsImNsYXNzTmFtZSIsInNldEhUTUwiLCJhcHBlbmQiLCJtYXBTdGF0dXNfaCIsIm91dGVySGVpZ2h0IiwiY3NzIl0sIm1hcHBpbmdzIjoiQUFDQSxJQUFJQSxFQUE2QixpQkFBWixFQUF5QkEsRUFBUSxJQUNyREEsRUFBUSxDQUNSQyxLQUFPLFdBQ05DLFNBQVNDLFlB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QUE0QmpCLEVBQVcsZUFGOUNDLEVBQVksS0FBT0MsR0FLcEMsMkNBSUhnQixnQkFBa0IsSUFBSS9ELFNBQVNnRSxNQUFNLENBQUNDLE9BQVFaLEVBQWNhLFVBQVcsb0JBQ3JFZixVQUFVLENBQUNKLEVBQVlELElBQ3ZCcUIsUUFBUUwsMEJBQ1JWLE1BQU1ILFNBRUgsQ0FrQk4sR0FqQmdCbkQsRUFBTVMsVUFFWkMsR0FBRyxPQUFRLFdBRXBCSCxRQUFRQyxJQUFJLDZDQUVaSCxFQUFFLHFCQUFxQk0sT0FFbEJOLEVBQUUscUJBQXFCTyxHQUFHLGFBQzlCUCxFQUFFLHFCQUFxQlEsV0FBVyxXQUlwQ1IsRUFBRSxjQUFjaUUsT0FBTyxtUUFFdkIvRCxRQUFRQyxJQUFLLHNDQUF5Q0gsRUFBRSxxQkFBcUJPLEdBQUcsYUFFM0VQLEVBQUUscUJBQXFCTyxHQUFHLFlBQWMsQ0FDNUMsSUFBSTJELEVBQWNsRSxFQUFFLHFCQUFxQm1FLGNBRXpDbkUsRUFBRSwyQkFBMkJvRSxJQUFJLGFBQWNGLEVBQWMsR0FBSyxXQVNuRXRFIiwiZmlsZSI6Im15Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKiBteS5qcyAqL1xyXG52YXIgbXlkb2MgPSAoIHR5cGVvZiAobXlkb2MpID09PSAnb2JqZWN0JyApID8gbXlkb2MgOiB7fTtcclxuKG15ZG9jID0ge1xyXG5cdGluaXQgOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRtYXBib3hnbC5hY2Nlc3NUb2tlbiA9ICdway5leUoxSWpvaWRHaGhkR0p5WVcwaUxDSmhJam9pWTJwMFl6TTFOVzl6TUhNNU1UTjVjRFJzZG5Kb09HdzNieUo5LkE3dW1aVnQ5U3g3TmI4amZONk0wM2cnO1xyXG5cdFx0bGV0IG15ZG9jX2lkX3F1ZXJ5U3RyX3ZhbCA9ICQudXJsUGFyYW0oJ215ZG9jaWQnKTtcclxuXHJcblx0XHRjb25zb2xlLmxvZygnbXlkb2NfaWRfcXVlcnlTdHJfdmFsOiAnICsgbXlkb2NfaWRfcXVlcnlTdHJfdmFsKTtcclxuXHJcblx0XHRpZiAoIG15ZG9jX2lkX3F1ZXJ5U3RyX3ZhbCA9PT0gZmFsc2UgKSB7XHJcblx0XHRcdGxldCBteWRvY19tYXAgPSBteWRvYy5sb2FkTWFwKCk7XHJcblxyXG5cdFx0XHRteWRvY19tYXAub24oJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0JCgnI215ZG9jX21hcF9zdGF0dXMnKS5oaWRlKCk7XHJcblxyXG5cdFx0XHRcdGlmICggJCgnI215ZG9jX21hcCAuYWxlcnQnKS5pcygnOnZpc2libGUnKSApIHtcclxuXHRcdFx0XHRcdCQoJyNteWRvY19tYXAgLmFsZXJ0JykucmVtb3ZlQXR0cignc3R5bGUnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0JCgnI215ZG9jX2lkX3NlYXJjaF9maWVsZCcpLnZhbChteWRvY19pZF9xdWVyeVN0cl92YWwpO1xyXG5cclxuXHRcdFx0JCgnI215ZG9jX2lkX3NlYXJjaF9nbycpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcblxyXG5cdFx0XHRteWRvYy5maW5kTXlEb0MoJ3VybCcpO1xyXG5cdFx0fVxyXG5cclxuXHRcdCQoJyNteWRvY19pZF9zZWFyY2hfZmllbGQnKS5vbignaW5wdXQnLCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdGxldCBteWRvY19pZF9zZWFyY2hfdmFsID0gJCh0aGlzKS52YWwoKTtcclxuXHRcdFx0XHRteWRvY19pZF9zZWFyY2hfdmFsID0gJC50cmltKG15ZG9jX2lkX3NlYXJjaF92YWwpO1xyXG5cclxuXHRcdFx0aWYgKG15ZG9jX2lkX3NlYXJjaF92YWwubGVuZ3RoID4gNCkge1xyXG5cdFx0XHRcdCQoJyNteWRvY19pZF9zZWFyY2hfZ28nKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkKCcjbXlkb2NfaWRfc2VhcmNoX2dvJykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0JCgnI215ZG9jX2lkX3NlYXJjaF9maWVsZCcpLmtleXByZXNzKCBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHRpZiAoZS53aGljaCA9PT0gMTMpIHtcclxuXHRcdFx0XHRteWRvYy5maW5kTXlEb0MoJ3VzZXInKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0JCgnI215ZG9jX2lkX3NlYXJjaF9nbycpLmNsaWNrKCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdG15ZG9jLmZpbmRNeURvQygndXNlcicpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdCxcclxuXHRsb2FkTWFwIDogZnVuY3Rpb24gKHNldHRpbmdzKSB7XHJcblx0XHQkKCcjbXlkb2NfbWFwX3N0YXR1cycpLnNob3coKTtcclxuXHJcblx0XHR2YXIgY2VudGVyID0gWy0xMDUuNTQ3MjIyLCAzOV07XHJcblx0XHR2YXIgem9vbSA9IDYuNTtcclxuXHJcblx0XHRpZiAodHlwZW9mIHNldHRpbmdzICE9PSAndW5kZWZpbmVkJykge1xyXG5cdFx0XHQvKiogSWYgbm8gbWFwIGNlbnRlciBpcyBzcGVjaWZpZWQsIHNldCB0byBnZW9ncmFwaGljIGNlbnRlciBvZiBDb2xvcmFkbyAqL1xyXG5cdFx0XHRpZiAodHlwZW9mIHNldHRpbmdzLmNlbnRlciAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuXHRcdFx0XHRjZW50ZXIgPSBzZXR0aW5ncy5jZW50ZXI7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8qKiBJZiBubyBtYXAgem9vbSBsZXZlbCBpcyBzcGVjaWZpZWQsIHNldCB0byBhIGxldmVsIG1ha2luZyBDb2xvcmFkbyBpZGVudGlmaWFibGUgYWNyb3NzIHdpZGVzdCB2YXJpZXR5IG9mIHJlc29sdXRpb25zICovXHJcblx0XHRcdGlmICh0eXBlb2Ygc2V0dGluZ3Muem9vbSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuXHRcdFx0XHR6b29tID0gc2V0dGluZ3Muem9vbTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGxldCBteWRvY19tYXAgPSBuZXcgbWFwYm94Z2wuTWFwKHtcclxuXHRcdFx0Y29udGFpbmVyOiAnbXlkb2NfbWFwJyxcclxuXHRcdFx0c3R5bGU6ICdtYXBib3g6Ly9zdHlsZXMvdGhhdGJyYW0vY2p0b2toMjY5MDJhZDFmbTQzeHFtNGt2MicsIC8vICdSYWRvIDJcclxuXHRcdFx0Y2VudGVyOiBjZW50ZXIsXHJcblx0XHRcdHpvb206IHpvb21cclxuXHRcdH0pO1xyXG5cclxuXHRcdHJldHVybiBteWRvY19tYXA7XHJcblx0fVxyXG5cdCxcclxuXHRmaW5kTXlEb0MgOiBmdW5jdGlvbiAoc291cmNlKSB7XHJcblxyXG5cdFx0Y29uc29sZS5sb2coJ2ZpbmRNeURvQy4uLicpO1xyXG5cclxuXHRcdCQoJyNteWRvY19tYXAgLmFsZXJ0JykuYWxlcnQoJ2Nsb3NlJyk7XHJcblxyXG5cdFx0bGV0IG15ZG9jX2lkX3NlYXJjaF92YWw7XHJcblxyXG5cdFx0c3dpdGNoIChzb3VyY2UpIHtcclxuXHRcdFx0Y2FzZSAndXNlcic6XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCcuLi5zb3VyY2U6IHVzZXInKTtcclxuXHJcblx0XHRcdFx0dmFyIHFTdHJfaWR4ID0gbG9jYXRpb24uaHJlZi5pbmRleE9mKCc/Jyk7XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdxU3RyX2lkeDogJyArIHFTdHJfaWR4KTtcclxuXHJcblx0XHRcdFx0aWYgKHFTdHJfaWR4ICE9PSAtMSkge1xyXG5cdFx0XHRcdFx0aGlzdG9yeS5wdXNoU3RhdGUoJycsIGRvY3VtZW50LnRpdGxlLCB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0bXlkb2NfaWRfc2VhcmNoX3ZhbCA9ICQoJyNteWRvY19pZF9zZWFyY2hfZmllbGQnKS52YWwoKTtcclxuXHRcdFx0XHRteWRvY19pZF9zZWFyY2hfdmFsID0gJC50cmltKG15ZG9jX2lkX3NlYXJjaF92YWwpO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAndXJsJzpcclxuXHJcblx0XHRcdFx0Y29uc29sZS5sb2coJy4uLnNvdXJjZTogdXJsJyk7XHJcblxyXG5cdFx0XHRcdGxldCBteWRvY19pZF9xdWVyeVN0cl92YWwgPSAkLnVybFBhcmFtKCdteWRvY2lkJyk7XHJcblx0XHRcdFx0bXlkb2NfaWRfc2VhcmNoX3ZhbCA9IG15ZG9jX2lkX3F1ZXJ5U3RyX3ZhbDtcclxuXHRcdH1cclxuXHJcblx0XHRteWRvY19pZF9zZWFyY2hfdmFsID0gbXlkb2NfaWRfc2VhcmNoX3ZhbC50b0xvd2VyQ2FzZSgpO1xyXG5cclxuXHRcdGNvbnNvbGUubG9nKCdteWRvY19pZF9zZWFyY2hfdmFsOiAnICsgbXlkb2NfaWRfc2VhcmNoX3ZhbCk7XHJcblxyXG5cdFx0bGV0IG15ZG9jX2lkX3ZhbGlkID0gZmFsc2U7XHJcblxyXG5cdFx0LyoqIFxyXG5cdFx0ICogSW4gYW4gdXBjb21pbmcgdmVyc2lvbiwgXHJcblx0XHQgKiBhdCB0aGlzIHBvaW50IGEgcmVxdWVzdCBpcyBtYWRlIFxyXG5cdFx0ICogdG8gdGhlIG15RG9DIGRhdGFzdG9yZSBcclxuXHRcdCAqIElmIGEgbWF0Y2ggaXMgZm91bmQsIFxyXG5cdFx0ICogYSBzdWNjZXNzIHN0YXR1cyBpcyByZXR1cm5lZCBcclxuXHRcdCAqIHdpdGggdGhlIGRhdGEgaW4gdGhlIHJlc3BvbnNlLlxyXG5cdFx0ICpcclxuXHRcdCAqIEZvciBub3csIHRoZXJlIGlzIHRoaXMuLi5cclxuXHRcdCAqL1xyXG5cclxuXHRcdGxldCBteWRvY19kYXRhID0ge1xyXG5cdFx0XHRkYXRlOiAnMjAxOS0wMy0xMScsXHJcblx0XHRcdGxhdDogNDAuMTMwLFxyXG5cdFx0XHRsb25nOiAtMTA1LjUxNFxyXG5cdFx0fTtcclxuXHJcblx0XHQvKiogTWF0Y2hpbmcgXCJhbHBoYVwiIGlzIHRoZSBkZXYgcGxhY2Vob2xkZXIgZm9yIG1hdGNoaW5nIGEgdmFsaWQgSUQgKi9cclxuXHRcdGlmIChteWRvY19pZF9zZWFyY2hfdmFsID09PSAnYWxwaGEnKSB7XHJcblx0XHRcdG15ZG9jX2lkX3ZhbGlkID0gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAobXlkb2NfaWRfdmFsaWQpIHtcclxuXHRcdFx0bGV0IG15ZG9jX2lkID0gbXlkb2NfaWRfc2VhcmNoX3ZhbDtcclxuXHJcblx0XHRcdC8qKiBTZXQgZGlyZWN0bHkgYWNjZXNzaWJsZSBVUkwgKi9cclxuXHRcdFx0aGlzdG9yeS5wdXNoU3RhdGUoJycsIGRvY3VtZW50LnRpdGxlLCAnP215ZG9jaWQ9JyArIG15ZG9jX2lkKTtcclxuXHJcblx0XHRcdGxldCBteWRvY19sYXQgPSBteWRvY19kYXRhLmxhdDtcclxuXHRcdFx0bGV0IG15ZG9jX2xvbmcgPSBteWRvY19kYXRhLmxvbmc7XHJcblx0XHRcdGxldCBteWRvY19sb2NfbWIgPSBbbXlkb2NfbG9uZywgbXlkb2NfbGF0XTtcclxuXHJcblx0XHRcdGxldCBzZXR0aW5ncyA9IHtcclxuXHRcdFx0XHRjZW50ZXI6IG15ZG9jX2xvY19tYixcclxuXHRcdFx0XHR6b29tOiAxNVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRsZXQgbXlkb2NfbWFwID0gbXlkb2MubG9hZE1hcChzZXR0aW5ncyk7XHJcblxyXG5cdFx0XHRteWRvY19tYXAub24oJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdmaW5kTXlEb0MgbXlkb2NfbWFwLm9uKGxvYWQpJyk7XHJcblxyXG5cdFx0XHRcdCQoJyNteWRvY19tYXBfc3RhdHVzJykuaGlkZSgpO1xyXG5cclxuXHRcdFx0XHRpZiAoICQoJyNteWRvY19tYXAgLmFsZXJ0JykuaXMoJzp2aXNpYmxlJykgKSB7XHJcblx0XHRcdFx0XHQkKCcjbXlkb2NfbWFwIC5hbGVydCcpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRsZXQgbXlkb2NfbWFya2VyID0gbmV3IG1hcGJveGdsLk1hcmtlcigpLnNldExuZ0xhdChteWRvY19sb2NfbWIpLmFkZFRvKG15ZG9jX21hcCk7XHJcblxyXG5cdFx0XHRcdHZhciBtYXJrZXJIZWlnaHQgPSAzOCxcclxuXHRcdFx0XHRcdG1hcmtlclJhZGl1cyA9IDgsXHJcblx0XHRcdFx0XHRsaW5lYXJPZmZzZXQgPSAxMDtcclxuXHJcblx0XHRcdFx0dmFyIHBvcHVwT2Zmc2V0cyA9IHtcclxuXHRcdFx0XHRcdCd0b3AnOiBbMCwgMF0sXHJcblx0XHRcdFx0XHQndG9wLWxlZnQnOiBbMCwwXSxcclxuXHRcdFx0XHRcdCd0b3AtcmlnaHQnOiBbMCwwXSxcclxuXHRcdFx0XHRcdCdib3R0b20nOiBbMCwgLW1hcmtlckhlaWdodF0sXHJcblx0XHRcdFx0XHQnYm90dG9tLWxlZnQnOiBbbGluZWFyT2Zmc2V0LCAobWFya2VySGVpZ2h0IC0gbWFya2VyUmFkaXVzICsgbGluZWFyT2Zmc2V0KSAqIC0xXSxcclxuXHRcdFx0XHRcdCdib3R0b20tcmlnaHQnOiBbLWxpbmVhck9mZnNldCwgKG1hcmtlckhlaWdodCAtIG1hcmtlclJhZGl1cyArIGxpbmVhck9mZnNldCkgKiAtMV0sXHJcblx0XHRcdFx0XHQnbGVmdCc6IFttYXJrZXJSYWRpdXMsIChtYXJrZXJIZWlnaHQgLSBtYXJrZXJSYWRpdXMpICogLTFdLFxyXG5cdFx0XHRcdFx0J3JpZ2h0JzogWy1tYXJrZXJSYWRpdXMsIChtYXJrZXJIZWlnaHQgLSBtYXJrZXJSYWRpdXMpICogLTFdXHJcblx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0bGV0IG15ZG9jX2xvY19zdHIgPSBteWRvY19sYXQgKyAnLCAnICsgbXlkb2NfbG9uZztcclxuXHJcblx0XHRcdFx0bXlkb2NfbWFwX3BvcHVwX3RlbXBsYXRlID0gJzxzcGFuIGNsYXNzPVwibXlkb2NfaWRcIj4nICsgbXlkb2NfaWQgKyAnPC9zcGFuPidcclxuXHRcdFx0XHRcdCsgJzxicj4nXHJcblx0XHRcdFx0XHQrIG15ZG9jX2xvY19zdHJcclxuXHRcdFx0XHRcdCsgJzxicj4nXHJcblx0XHRcdFx0XHQrICc8YSBocmVmPVwiI215ZG9jX2RldGFpbHNcIj5EZXRhaWxzPC9hPidcclxuXHRcdFx0XHQ7XHJcblxyXG5cdFx0XHRcdG15ZG9jX21hcF9wb3B1cCA9IG5ldyBtYXBib3hnbC5Qb3B1cCh7b2Zmc2V0OiBwb3B1cE9mZnNldHMsIGNsYXNzTmFtZTogJ215ZG9jLW1hcC1wb3B1cCd9KVxyXG5cdFx0XHRcdFx0LnNldExuZ0xhdChbbXlkb2NfbG9uZywgbXlkb2NfbGF0XSlcclxuXHRcdFx0XHRcdC5zZXRIVE1MKG15ZG9jX21hcF9wb3B1cF90ZW1wbGF0ZSlcclxuXHRcdFx0XHRcdC5hZGRUbyhteWRvY19tYXApO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGxldCBteWRvY19tYXAgPSBteWRvYy5sb2FkTWFwKCk7XHJcblxyXG5cdFx0XHRteWRvY19tYXAub24oJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdmaW5kTXlEb0MgbXlkb2NfbWFwLm9uKGxvYWQpIC0gaW52YWxpZCBpZCcpO1xyXG5cclxuXHRcdFx0XHQkKCcjbXlkb2NfbWFwX3N0YXR1cycpLmhpZGUoKTtcclxuXHJcblx0XHRcdFx0aWYgKCAkKCcjbXlkb2NfbWFwIC5hbGVydCcpLmlzKCc6dmlzaWJsZScpICkge1xyXG5cdFx0XHRcdFx0JCgnI215ZG9jX21hcCAuYWxlcnQnKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQkKCcjbXlkb2NfbWFwJykuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtZGFuZ2VyIGFsZXJ0LWRpc21pc3NpYmxlIGZhZGUgc2hvd1wiIHJvbGU9XCJhbGVydFwiPjxzdHJvbmc+RG9DIGlkIG5vdCBmb3VuZC48L3N0cm9uZz4gUGxlYXNlIHRyeSBhZ2Fpbi48YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlXCIgZGF0YS1kaXNtaXNzPVwiYWxlcnRcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIj48c3BhbiBhcmlhLWhpZGRlbj1cInRydWVcIj4mdGltZXM7PC9zcGFuPjwvYnV0dG9uPjwvZGl2PicpO1xyXG5cclxuXHRcdFx0Y29uc29sZS5sb2coICckKCNteWRvY19tYXBfc3RhdHVzKS5pcyg6dmlzaWJsZSk6ICcgKyAgJCgnI215ZG9jX21hcF9zdGF0dXMnKS5pcygnOnZpc2libGUnKSApO1xyXG5cclxuXHRcdFx0aWYgKCAkKCcjbXlkb2NfbWFwX3N0YXR1cycpLmlzKCc6dmlzaWJsZScpICkge1xyXG5cdFx0XHRcdGxldCBtYXBTdGF0dXNfaCA9ICQoJyNteWRvY19tYXBfc3RhdHVzJykub3V0ZXJIZWlnaHQoKTtcclxuXHJcblx0XHRcdFx0JCgnI215ZG9jX21hcCAuYWxlcnQ6Zmlyc3QnKS5jc3MoJ21hcmdpbi10b3AnLCBtYXBTdGF0dXNfaCArIDE2ICsgJ3B4Jyk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8qKiBBdXRvY2xvc2UgdGhlIGFsZXJ0cyAqL1xyXG5cdFx0XHQvKndpbmRvdy5zZXRUaW1lb3V0KCBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICAgICAgJCgnI215ZG9jX21hcCAuYWxlcnQnKS5hbGVydCgnY2xvc2UnKTtcclxuXHQgICAgICAgIH0sIDQwMDApOyovXHJcblx0XHR9XHJcblx0fVxyXG59KS5pbml0KCk7XHJcbiJdfQ==
